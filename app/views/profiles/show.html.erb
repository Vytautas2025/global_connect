<div class="container-fluid body-color min-vh-100 px-4">
  <div class="row">
    <!-- Left Column -->
    <div class="col-md-4">
      <div class="p-4 text-dark my-4" style="background-color: #93CDD4; border-radius: 10px;">
        <div class="p-3">
          <% if @user.photo.attached? %>
            <%= image_tag @user.photo, alt: "User Avatar", class: "profile-icon" %>
          <% else %>
            <span class="profile-icon" style="background-color: #0832A8; font-size: 120px; color: white;"><%= @user.email.split('@').first[0].upcase %></span>
          <% end %>

          <h4 style="font-weight: bold;"><%= @user.first_name + " " + @user.last_name %></h4>
          <h6><%= @user.profile_name %></h6>
          <hr>
          <p style="font-weight: 500; opacity: 0.8; color: #5E5F61;">About</p>
          <p><%= @user.bio %></p>
          <% if @user == current_user %>
            <%= link_to edit_profile_path(@user), class: "btn-profile-edit my-2" do %>
              <i class="fa-solid fa-pen"></i> Edit profile
            <% end %>
          <% end %>
      </div>
      </div>
    </div>

    <!-- Right Column -->
    <div class="col-md-8">
      <% if @user == current_user %>
        <!-- Your Next Event Card -->
        <% if @next_event %>
          <%= link_to event_path(@next_event), class: "text-decoration-none" do %>
            <div class="event-card my-4">
              <div class="overlay" style="background-image: url(<%= event_banner_image(@next_event) %>); background-size: cover; background-position: center;">
                <h4 class="mb-3 text-center text-white">Your Next Event</h4>
                <h5 class="text-white"><%= @next_event.name %></h5>
                <p class="text-white mb-1"><strong>Date:</strong> <%= @next_event.date.strftime('%b %-d, %Y') %></p>
                <p class="text-white mb-1"><strong>Location:</strong> <%= @next_event.location %></p>
                <p class="text-white"><%= truncate(@next_event.description, length: 100) %></p>
              </div>
            </div>
          <% end %>
        <% else %>
          <div class="event-card my-4">
            <div class="overlay" style="background-image: url('https://picsum.photos/600/400'); background-size: cover; background-position: center;">
              <h4 class="mb-3 text-center text-white">Your Next Event</h4>
              <p class="text-white text-center">No upcoming events.</p>
            </div>
          </div>
        <% end %>

        <!-- Upcoming Events List -->
        <% if @upcoming_events.any? %>
          <div class="mt-4">
            <h4 class="mb-3">Your Upcoming Events</h4>
            <% @upcoming_events.each do |event| %>
              <%= link_to event_path(event), class: "text-decoration-none" do %>
                <div class="event-card mb-4">
                  <div class="overlay" style="background-image: url(<%= event_banner_image(event) %>); background-size: cover; background-position: center;">
                    <h5 class="text-white"><%= event.name %></h5>
                    <p class="text-white mb-1"><strong>Date:</strong> <%= event.date.strftime('%b %-d, %Y') %></p>
                    <p class="text-white mb-1"><strong>Location:</strong> <%= event.location %></p>
                    <p class="text-white"><%= truncate(event.description, length: 100) %></p>
                  </div>
                </div>
              <% end %>
            <% end %>
          </div>
        <% end %>
      <% else %>
        <div class="text-center py-5">
          <h4>This user's events are private</h4>
          <p class="text-muted">Event information is only visible to the profile owner.</p>
        </div>
      <% end %>
    </div>
  </div>
</div>
