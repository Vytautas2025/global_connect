<div class="row align-items-stretch">

  <div class="col-lg-8 d-flex flex-column my-3">
    <div class="cards-section p-4 w-100">
      <h2 class="mb-3 text-center">Upcoming Events</h2>
      <div class="row gx-2 gy-3">
        <% @events.select { |event| event.date >= Date.today }.each do |event| %>
          <div class="col-6 col-md-4">
            <%= link_to event_path(event), class: "card event-card h-100 clickable-container position-relative text-decoration-none" do %>
              <div class="event-card-image-wrapper">
                <%= image_tag event_banner_image(event), class: "card-image" %>
                <h3 class="event-card-name"><%= event.name %></h3>
              </div>
              <div class="event-card-overlay">
                <p class="mb-1 text-white text-center">
                  🕑 <%= event.date.strftime("%b %-d, %Y • %I:%M %p") %>
                </p>
                <p class="mb-1 text-white text-center">
                  📍 <%= event.location %>
                </p>
                <p class="mb-1 text-white text-center">
                  🏃‍♂️ <%= event.people_limit%> person limit
                </p>
                <p class="mb-1 text-white text-center">
                  💬 <%= truncate(event.description, length: 100) %>
                </p>
              </div>
            <% end %>
          </div>
        <% end %>
      </div>
    </div>

    <div class="cards-section p-4 w-100 mt-4">
      <h2 class="mb-3 text-center">Past Events</h2>
      <div class="row gx-2 gy-3">
        <% @events.select { |event| event.date < Date.today }.each do |event| %>
          <div class="col-6 col-md-4">
            <%= link_to event_path(event), class: "card event-card h-100 clickable-container position-relative text-decoration-none past-event" do %>
              <div class="event-card-image-wrapper">
                <%= image_tag event_banner_image(event), class: "card-image" %>
                <h3 class="event-card-name"><%= event.name %></h3>
              </div>
              <div class="event-card-overlay">
                <p class="mb-1 text-white text-center">
                  🕑 <%= event.date.strftime("%b %-d, %Y • %I:%M %p") %>
                </p>
                <p class="mb-1 text-white text-center">
                  📍 <%= event.location %>
                </p>
                <p class="mb-1 text-white text-center">
                  🏃‍♂️ <%= event.people_limit%> person limit
                </p>
                <p class="mb-1 text-white text-center">
                  💬 <%= truncate(event.description, length: 100) %>
                </p>
              </div>
            <% end %>
          </div>
        <% end %>
      </div>
    </div>
  </div>



  <div class="col-lg-4">
    <div class="map-container d-flex justify-content-center">
      <div style="width: 100%;">
        <%= render "shared/app_map" %>
      </div>
    </div>
  </div>
</div>
